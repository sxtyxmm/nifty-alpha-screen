# Output Format Documentation

This document describes the output CSV files generated by the Financial Data Automation Assistant.

## Strategy 1: Momentum + Retracement Strategy

**Output File:** `strategy1_momentum_retracement.csv`

### Columns

| Column Name | Description | Type | Example |
|------------|-------------|------|---------|
| Rank | Ranking based on combined score (1 = best) | Integer | 1 |
| Symbol | Stock ticker symbol (NSE) | String | RELIANCE |
| Retracement_from_52w_high_% | How far the stock is from its 52-week high (negative = below high) | Float | -15.23 |
| Return_3M_% | 3-month return percentage | Float | 12.45 |
| Return_6M_% | 6-month return percentage | Float | 28.67 |
| Sharpe_Ratio | Risk-adjusted return metric (higher = better) | Float | 1.85 |
| Sortino_Ratio | Downside risk-adjusted return (higher = better) | Float | 2.34 |
| Relative_Strength_vs_Nifty_% | Outperformance vs Nifty index (positive = outperforming) | Float | 5.67 |
| Combined_Score | Weighted score from all metrics | Float | 1.8945 |

### Selection Criteria

Stocks must meet ALL of these criteria:
- ✅ Within 30% of 52-week high
- ✅ Positive returns over 3 months
- ✅ Positive returns over 6 months
- ✅ Outperformed Nifty index over 6 months

### Scoring Formula

```
Combined Score = (Sharpe × 0.3) + (Sortino × 0.3) + (6M Return × 0.2) + (3M Return × 0.1) + (Rel Strength × 0.1)
```

### Output Size

Top 20 stocks only

---

## Strategy 2: EMA Retracement Strategy

**Output File:** `strategy2_ema_retracement.csv`

### Columns

| Column Name | Description | Type | Example |
|------------|-------------|------|---------|
| Symbol | Stock ticker symbol (NSE) | String | TCS |
| Current_Price | Latest closing price | Float | 3456.78 |
| EMA_44 | 44-day Exponential Moving Average | Float | 3445.23 |
| Distance_from_EMA_% | How far current price is from EMA | Float | 0.33 |
| EMA_Change_5d_% | Change in EMA over last 5 days | Float | 0.85 |

### Selection Criteria

Stocks must meet ALL of these criteria:
- ✅ 44-day EMA is rising (current EMA > EMA from 5 days ago)
- ✅ Current price is near EMA (within ±1%)

### Output Size

All qualifying stocks (no limit)

---

## Example Usage

### Reading Strategy 1 Results

```python
import pandas as pd

# Read the CSV
df = pd.read_csv('strategy1_momentum_retracement.csv')

# Get top 5 stocks
top_5 = df.head(5)
print(top_5[['Rank', 'Symbol', 'Combined_Score']])

# Filter high Sharpe ratio stocks
high_sharpe = df[df['Sharpe_Ratio'] > 1.5]
```

### Reading Strategy 2 Results

```python
import pandas as pd

# Read the CSV
df = pd.read_csv('strategy2_ema_retracement.csv')

# Get stocks closest to EMA
closest = df.sort_values('Distance_from_EMA_%', key=abs)
print(closest.head())

# Filter by EMA momentum
strong_ema = df[df['EMA_Change_5d_%'] > 1.0]
```

---

## Notes

- All percentage values are expressed as actual percentages (e.g., 15.5 means 15.5%, not 0.155)
- Negative retracement means the stock is below its 52-week high
- Empty results for a strategy mean no stocks met the criteria
- Data is point-in-time and should be refreshed regularly for trading decisions
